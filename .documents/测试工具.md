# 测试工具

## 概述
项目自制了一套MCP工具（位于 `.McpServer/` 目录），用于驱动游戏的自动化测试。

## 测试流程
1. 使用 `system_launch_program` 启动游戏（会自动编译）
2. 使用 `program_start_new_game` 开始新游戏
3. 进行相关内容测试（如 `game_start_combat` 开始战斗）
4. 如果遇到问题，查看 `.logs/` 目录下对应的日志文件定位问题
5. 测试完毕后使用 `system_shutdown` 关闭游戏

## 可用的MCP工具指令

### 系统级指令
- `system_launch_program` - 启动游戏程序（会自动编译项目）
- `system_shutdown` - 关闭游戏程序

### 程序级指令
- `program_start_new_game` - 开始新游戏（从主菜单进入游戏）

### 游戏级指令
- `game_start_combat` - 开始战斗（从准备状态进入战斗状态）
- `game_quit_to_menu` - 退出到主菜单

### 调试指令
- `debug_show_node_tree` - 显示节点树结构（JSON格式）
  - 参数：`root` - 起始节点路径（默认 `/root`）

## 重要提示
- 如果修改了游戏代码,需要重启游戏`system_shutdown`, `system_launch_program`才能编译最新代码
- **如果修改了 `.McpServer/` 目录下的代码，必须重启MCP服务才能生效**
- 每个指令都是同步的，会在完成其功能后返回结果，无需手动等待
- 所有指令执行期间的日志会自动收集并返回


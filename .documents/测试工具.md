# 测试工具

## 概述
项目自制了一套MCP工具（位于 `.McpServer/` 目录），用于驱动游戏的自动化测试。

## 测试流程
1. 使用 `system_launch_program` 启动游戏（会自动编译）
2. 使用 `game_select_option` 选择对话框选项进行游戏交互
3. 如果遇到问题，查看 `.logs/` 目录下对应的日志文件定位问题
4. 测试完毕后使用 `game_quit` 关闭游戏

## 可用的MCP工具指令

### 系统级指令
- `system_launch_program` - 启动游戏程序（会自动编译项目）

### 游戏级指令
- `game_select_option` - 选择对话框选项
  - 参数：`option_index` - 选项索引（从0开始）
  - 游戏会在对话框激活时输出可选择的选项列表
- `game_quit` - 退出游戏

### 调试指令
- `show_node_tree` - 显示节点树结构（JSON格式）
  - 显示从根节点开始的完整节点树

## 重要提示
- 如果修改了游戏代码，需要重启游戏 (`game_quit`, `system_launch_program`) 才能编译最新代码
- **如果修改了 `.McpServer/` 目录下的代码，必须重启MCP服务才能生效**
- 每个指令都是同步的，会在完成其功能后返回结果，无需手动等待
- 所有指令执行期间的日志会自动收集并返回
- 游戏基于对话框系统，通过选择不同选项来推进游戏流程


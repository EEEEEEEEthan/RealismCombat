# 待办

## 工具链
- [ ] 增加一键将任意图片转换为屏幕分辨率且符合FC配色的工具

## 对话框系统

## 背景系统
- [ ] 增加显示/隐藏背景图片的系统

## 战斗系统
- [ ] 增加战斗中的教程
- [ ] 选择目标时hover的目标角色卡片应该展开
- [x] 砍伤命中身体时附加流血效果
- [ ] 硬生生打在身上 前面BodyPart没有替换文本

## 身体部位血量系统
- [ ] 血条改为分数。不同部位用不同的最大血量
- [x] 头部命名调整为头颈

## 装备系统
- [ ] 接入excel
- [ ] 装备的叙事文本显示时变为灰色

## 动作系统
- [x] 增加[爬起]动作
- [x] 躯干撞击不能选择头颈，撞击腿时，不管是否成功，发起方添加[倒伏]
- [x] 躯干撞击如果命中，有概率给对方增加[倒伏]。概率按总重量计算 weightTarget / totalWeight
- [x] 头槌目标是手臂或躯干时发起方有概率令目标获得[倒伏]，目标是腿时发起方必定获得[倒伏]
- [x] 所有角色初始可用头槌动作
- [x] 前摇后摇消耗的行动力需要显示在行动菜单

## 反应系统
- [ ] 战斗开始时行动力计算有问题, 上前交涉还能先手, 待查
- [x] 玩家进行反应时需要展示当前反应成功概率
- [ ] 反应点数不够时,选项应该变灰
- [x] AI选择格挡或闪避时，先计算所有可用方式的期望伤害，再以1/期望伤害为权重随机抽取反应方式，避免用腿去格挡头部攻击
- [x] 被束缚部位不能用于格挡，被束缚部位物品槽(递归)里的Target也不能用于格挡；被束缚的是腿时闪避概率/5
- [x] 格挡仅使用当前动作的部位或其装备时会打断自身行动
- [ ] 若当前动作使用的部位被束缚，动作应被打断
- [x] 用武器格挡成功会对攻击使用的部位造成伤害。伤害值是1/2的武器砍伤
- [ ] 格挡应该是在选择用指定部位格挡时才显示成功率
- [ ] 选择格挡部位的title错了，应该是"用指定部位进行格挡"

## 音乐

## buff系统
- [x] 增加[倒伏]buff
- [x] 角色任意部位not Free时，闪避和格挡成功率下降到1/3
- [ ] Buff列表中抓/束缚类buff增加desc描述，BuffCode扩展Desc { get; }
- [ ] 增加疼痛。用疼痛部位发起行动会提高需要消耗的行动力，闪避和格挡率更高。
- [x] 增加流血。身体部位受到砍伤时必定造成流血，受到刺伤时50%造成流血。流血会每5tick随机部位生命值-1，身体任意部位有流血buff时，角色节点需要打开流血动画
- [x] 部位生命归零的腿添加断腿buff，闪避概率/5
- [ ] 增加流血buff时缺少文字表达
- [ ] 玩家增加倒伏状态时缺少文字表达
- [ ] 倒伏之后应该禁用除了爬起以外的所有状态

## jucy
- [ ] 身体部位的血条要缓慢变化

## 存档

# 最美角落

## 武器卡住

Ethan的短剑精准刺入了Dove胸甲缝隙!
Dove死了
Ethan的短剑卡在Dove的胸甲缝隙里拔不出来
Ethan尝试用力拔出短剑

## 武器断裂

Ethan的斩击
Dove用钉头锤挡住了Ethan的斩击
Ethan的长剑断了!

## 面罩

Ethan束缚住了Jack!
Dove掀开了Jack的面罩!
Dove用匕首刺进Jack的眼球!

## 流血

角色卡片有流血动画
